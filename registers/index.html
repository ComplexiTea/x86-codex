<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registers - Intel Processors</title>
    <style>
        body { font-family: sans-serif; max-width: 1000px; margin: 0 auto; padding: 20px; line-height: 1.6; }
        h1 { color: #333; }
        .nav { margin: 20px 0; border-bottom: 2px solid #ddd; padding-bottom: 10px; }
        .nav a { margin-right: 20px; text-decoration: none; color: #0066cc; }
        .nav a:hover { text-decoration: underline; }
        .back-link { color: #0066cc; text-decoration: none; font-size: 14px; }
        .back-link:hover { text-decoration: underline; }
        .search-box { margin: 20px 0; }
        .search-box input { padding: 10px; width: 100%; max-width: 400px; border: 1px solid #ddd; border-radius: 3px; font-size: 14px; }
        .registers-list { list-style: none; padding: 0; margin-top: 20px; }
        .register-item { margin: 10px 0; display: flex; align-items: center; gap: 15px; }
        .register-item a { color: #0066cc; text-decoration: none; min-width: 50px; font-weight: bold; }
        .register-item a:hover { text-decoration: underline; }
        .register-description { color: #666; font-size: 14px; }
        .register-item.hidden { display: none; }
        .no-results { color: #999; font-style: italic; margin-top: 20px; }
    </style>
</head>
<body>
    <a href="/x86-codex" class="back-link">‚Üê Back to home</a>

    <h1>Registers</h1>

    <div class="nav">
        <a href="/x86-codex/">Home</a>
        <a href="/x86-codex/instructions/">Instructions</a>
        <a href="/x86-codex/registers/">Registers</a>
    </div>

    <div class="search-box">
        <input type="text" id="searchInput" placeholder="Search for a register...">
    </div>

    <p>List of 64-bit registers:</p>

    <ul class="registers-list" id="registersList">
        <!-- Register items will be generated by JavaScript -->
    </ul>

    <div id="noResults" class="no-results" style="display: none;">No registers found</div>

    <script>
        async function extractDescription(filename) {
            try {
                const response = await fetch(`/x86-codex/registers/${filename}.md`);
                if (!response.ok) return '';
                const text = await response.text();
                const firstLine = text.split('\n')[0];
                if (firstLine.startsWith('.desc "') && firstLine.endsWith('"')) {
                    return firstLine.substring(7, firstLine.length - 1);
                }
                return '';
            } catch (error) {
                return '';
            }
        }

        async function renderRegisters() {
            try {
                const response = await fetch('/x86-codex/registers/index.json');
                const registers = await response.json();

                const container = document.getElementById('registersList');
                container.innerHTML = '';

                for (const reg of registers) {
                    const description = await extractDescription(reg.file64);

                    const itemLi = document.createElement('li');
                    itemLi.className = 'register-item';
                    itemLi.setAttribute('data-name', reg.name64.toLowerCase());
                    // Store all variants for search
                    const allVariants = `${reg.name64} ${reg.name32} ${reg.name16} ${reg.name8}`.toLowerCase();
                    itemLi.setAttribute('data-variants', allVariants);

                    itemLi.innerHTML = `
                        <a href="/x86-codex/page.html?category=registers&file=${reg.file64}">${reg.name64}</a>
                        <span class="register-description">${description}</span>
                    `;

                    container.appendChild(itemLi);
                }

                setupSearch();
            } catch (error) {
                console.error('Error loading registers:', error);
            }
        }

        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            const registerItems = document.querySelectorAll('.register-item');
            const noResults = document.getElementById('noResults');

            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                let visibleCount = 0;

                registerItems.forEach(item => {
                    const variants = item.getAttribute('data-variants');
                    if (variants.includes(searchTerm)) {
                        item.classList.remove('hidden');
                        visibleCount++;
                    } else {
                        item.classList.add('hidden');
                    }
                });

                noResults.style.display = visibleCount === 0 ? 'block' : 'none';
            });
        }

        // Initialize on page load
        renderRegisters();
    </script>

    
    
</body>
</html>
